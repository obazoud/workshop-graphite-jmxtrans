<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>De 'zero monitoring' à 'un alerting fonctionnel 100% opérationnel' avec JMXTrans, Graphite et Syrein</title>

    <meta name="description" content="Présentation Xebia sur le monitoring open source en temps réel ">
    <meta name="author" content="Antoine, Jean-Eudes & Benjamin">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/xebia.css" id="theme">


    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
        document.write('<link rel="stylesheet" href="css/print/' + ( window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">');
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="logo"></div>

<div class="reveal xebia">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

        <section>
            <h1>Monitoring & alerting open source made easy</h1>

            <p>
                <small>Created by
                    <br/>
                    <a href="mailto:amichaud@xebia.fr">Antoine</a> / <a href="https://twitter.com/AMichaud34" target="_blank">@AMichaud34</a>
                    <br/><a href="mailto:jecouignoux@xebia.fr">Jean-eudes</a>
                    <br/><a href="mailto:blacroix@xebia.fr">Benjamin</a> / <a href="https://twitter.com/benjlacroix" target="_blank">@benjlacroix</a>
                </small>
            </p>
        </section>

        <section>
            <section>
                <h2>Evolution rapide des besoins : <br/>Time to market</h2>

                <p>
                    Besoin d'adaptation, de réactivité
                </p>
            </section>
            <section>
                <h2>Comment ?</h2>

                <p>Agilité : développements <-> besoins métiers</p>

                <p>Intégration & livraison continue : mise en production régulière & de qualité</p>

                <p>Gestion environnements : réactivité des outils et performance</p>
            </section>
            <section>
                <h2>Quoi ?</h2>

                <p>Quelles parties métier ?</p>

                <p>Quelles parties technique ?</p>

                <p>Quelles configurations ?</p>

                <p>Quels impacts ?</p>
            </section>
        </section>

        <section>
            <section>
                <h2>Monitoring</h2>
            </section>
            <section>
                <h2>Quoi monitorer ?</h2>
            </section>
            <section>
                <h2>Indicateurs techniques</h2>

                <p>La mémoire utilisée/libre</p>

                <p>Le garbage collector</p>
            </section>
            <section>
                <h2>Indicateurs fonctionnels</h2>

                <p>Nombre de vente</p>

                <p>Nombre d'accès</p>

                <p>Nombre de recherche</p>

                <p>Gains</p>
            </section>
            <section>
                <h2>Quels visuels ?</h2>
            </section>
        </section>

        <section>
            <section>
                <h2>Graphite</h2>

                <p>
                <blockquote>Scalable & real time graphing</blockquote>
                </p>
            </section>
            <section>
                <h2>Communication</h2>

                <div class="">
                    <img class="fragment" src="img/input-graphite1.png">
                    <img class="fragment" src="img/input-graphite2.png"
                         style="position: absolute;left: 0;margin-left: 9%;background: none">
                </div>
                <p class="fragment">Stockage dans le moteur <i>Carbon</i></p>
            </section>
            <section>
                <h2>Format des données</h2>

                <p>Format par défaut utilisé : format plain text</p>
                        <pre>
                            <code data-trim>
&lt;metric path&gt; &lt;metric value&gt; &lt;metric timestamp&gt;
                            </code>
                        </pre>
                        <pre>
                            <code data-trim>
 PORT=2003
SERVER=graphite.your.org
echo "local.random.diceroll 4 `date +%s`" | nc -q0 ${SERVER} ${PORT}
                            </code>
                        </pre>
            </section>
        </section>

        <section>
            <section>
                <h2>Automatisation de l'alimentation :<br/>JMXTrans</h2>

                <p>Configuration JSON</p>

                <pre>
                    <code data-trim>
{
 "servers": [
  {
    "queries": [
     {
      "outputWriters": [
       {
        "@class": "com.googlecode.jmxtrans.model.output.GraphiteWriter",
        "settings": {
         "port": 2003,
         "host": "mygraphite.mydomain"
        }
       }
      ],
      "obj": "java.lang:type=OperatingSystem",
      "attr": [
       "SystemLoadAverage",
       "AvailableProcessors",
       "TotalPhysicalMemorySize",
       "FreePhysicalMemorySize",
       "TotalSwapSpaceSize",
       "FreeSwapSpaceSize"
      ]
     }
    ]
    }
  ]
}
                    </code>
                </pre>
            </section>
            <section>
                <h2>Métriques OPS</h2>
                <p>Indicateurs sur la JVM & le serveur d'application</p>
                <ul>
                    <li>System</li>
                    <li>Heap</li>
                    <li>Memory Pool</li>
                    <li>Threads</li>
                    <li>AJP/HTTP Pool</li>
                    <li>Datasource</li>
                    <li><a href="https://github.com/jmxtrans/jmxtrans/wiki/MoreExamples" target="_blank">Etc.</a></li>
                </ul>
            </section>
            <section>
                <h2>Output</h2>

                <p>Formats de sortie divers</p>

                <p>Writer vers les principaux outils de graphes</p>
                <ul>
                    <li><a href="http://graphite.wikidot.com/" target="_blank">Graphite</a></li>
                    <li><a href="https://github.com/etsy/statsd/" target="_blank">StatsD</a></li>
                    <li><a href="http://ganglia.sourceforge.net/" target="_blank">Ganglia</a></li>
                    <li><a href="http://www.cacti.net/" target="_blank">Cacti</a></li>
                </ul>
            </section>
        </section>

        <section>
            <section>
                <h2>Dashboard</h2>

                <h3>Avantages</h3>
                <ul>
                    <li>Création automatique des graphes en fonction des indicateurs</li>
                    <li>Interface WYSIWYG</li>
                    <li>Efficacité de la présentation des indicateurs</li>
                </ul>
                <img src="img/graph1.png">
                <img src="img/graph2.png">
            </section>
            <section>
                <h2>Dashboard</h2>

                <h3>Inconvénient</h3>
                <ul>
                    <li>Installation & maintenance opérationnelle</li>
                </ul>
                <p style="margin-top: 20px">Il existe des solutions SAAS <a href="https://www.hostedgraphite.com/"
                                                                            target="_blank">Hosted Graphite</a></p>
            </section>
        </section>

        <section>
            <section>
                <img src="img/seyren.png">
                <blockquote>Alerting dashboard for Graphite</blockquote>
                <br/>
                <p>Définissions d'alertes à partir des métriques Graphite</p>
            </section>
            <section>
                <h2>Output</h2>
                <ul>
                    <li>Email</li>
                    <li><a href="https://www.flowdock.com/" target="_blank">Flowdock</a> (Chat & inbox par équipe)</li>
                    <li><a href="https://www.hipchat.com/" target="_blank">HipChat</a> (Groupes privées & chat)</li>
                    <li><a href="http://www.pagerduty.com/" target="_blank">PagerDuty</a> (Plate-forme d'alerte & push mobile)</li>
                    <li><a href="https://pushover.net/">Pushover</a> (Notification mobile)</li>
                </ul>
            </section>
        </section>

        <section>
            <h2>Conclusion</h2>

            <br/>

            <p><span class="color2">JMXTrans</span> envoyer efficacement tous les métriques à surveiller</p>

            <p><span class="color1">Graphite</span> graphes fonctionnels & techniques made easy</p>

            <p><span class="color3">Seyren</span> alerting en temps réel</p>
        </section>

        <section>
            <section>
            <h2>Hands'On</h2>
            <p>Monitoring d'une application de gestion de cocktails</p>
            <div class="fragment">
                <p>Hébergement sur Amazon EC2</p>
                <img src="img/amazon_large_logo1.png" height="128" width="400" style="border: none;padding: 20px">
            </div>
            </section>
            <section>
                <h2>Environnements</h2>
                <p>
                    <blockquote>Graphite</blockquote>
                </p>
                <ul>
                    <li>Graphes</li>
                    <li>Apache + Graphite + Carbon + Whisper</li>
                    <p>
                        <img src="img/statsd.png">
                    </p>
                </ul>
            </section>
            <section>
                <h2>Environnements</h2>
                <p>
                    <blockquote>Cocktail Web application & JMXTrans</blockquote>
                </p>
                <ul>
                    <li>
                        Application métier
                    </li>
                    <li>
                        Jetty + Maven + Java + JMXTrans Embedded
                    </li>
                </ul>
                <p>
                    <img src="img/webapp1.png" height="40%" width="40%">
                    <img src="img/webapp2.png" height="40%" width="40%">
                </p>
            </section>
            <section>
                <h2>Environnements</h2>
                <p>
                    <blockquote>Gatling</blockquote>
                </p>
                <ul>
                    <li>Simuler de la navigation</li>
                </ul>
                <p>
                    <img src="img/gatling_tool.png" height="250" width="250" style="padding: 20px;border: none;">
                </p>
            </section>

        </section>

    <section>
        <h2>Your Turn</h2>
    </section>

    </div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.min.js"></script>

<script>

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
            { src: 'lib/js/classList.js', condition: function () {
                return !document.body.classList;
            } },
            { src: 'plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            } },
            { src: 'plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            } },
            { src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                hljs.initHighlightingOnLoad();
            } },
            { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () {
                return !!document.body.classList;
            } },
            { src: 'plugin/notes/notes.js', async: true, condition: function () {
                return !!document.body.classList;
            } }
        ]
    });

</script>

</body>
</html>
